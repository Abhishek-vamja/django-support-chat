<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Django Support Chat Library - Developer Guide</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 60px 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 3em;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
            margin-bottom: 20px;
        }

        .badge {
            display: inline-block;
            background: rgba(255, 255, 255, 0.2);
            padding: 8px 16px;
            border-radius: 20px;
            margin: 0 5px;
            font-size: 0.9em;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .nav {
            background: #f8f9fa;
            border-bottom: 2px solid #667eea;
            padding: 20px 40px;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav ul {
            list-style: none;
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }

        .nav a {
            color: #667eea;
            text-decoration: none;
            font-weight: 600;
            transition: color 0.3s;
        }

        .nav a:hover {
            color: #764ba2;
        }

        .content {
            padding: 40px;
        }

        section {
            margin-bottom: 60px;
            scroll-margin-top: 100px;
        }

        h2 {
            color: #667eea;
            font-size: 2em;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }

        h3 {
            color: #764ba2;
            font-size: 1.4em;
            margin-top: 30px;
            margin-bottom: 15px;
        }

        h4 {
            color: #333;
            font-size: 1.1em;
            margin-top: 20px;
            margin-bottom: 10px;
            font-weight: 600;
        }

        p {
            margin-bottom: 15px;
            color: #555;
        }

        code {
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            color: #d63384;
        }

        .code-block {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            border-left: 4px solid #667eea;
        }

        .code-block code {
            background: none;
            color: inherit;
            padding: 0;
        }

        .highlight {
            color: #667eea;
            font-weight: 600;
        }

        .step-box {
            background: #f0f7ff;
            border-left: 4px solid #667eea;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .step-number {
            display: inline-block;
            background: #667eea;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            text-align: center;
            line-height: 30px;
            margin-right: 10px;
            font-weight: bold;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .feature-card {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.2);
        }

        .feature-card h4 {
            color: #667eea;
            margin-top: 0;
        }

        .table-wrapper {
            overflow-x: auto;
            margin: 20px 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
        }

        table thead {
            background: #667eea;
            color: white;
        }

        table th,
        table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        table tbody tr:hover {
            background: #f8f9fa;
        }

        table tbody tr:nth-child(even) {
            background: #f8f9fa;
        }

        .warning {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
            color: #856404;
        }

        .success {
            background: #d4edda;
            border-left: 4px solid #28a745;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
            color: #155724;
        }

        .info {
            background: #d1ecf1;
            border-left: 4px solid #17a2b8;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
            color: #0c5460;
        }

        .file-tree {
            background: #f4f4f4;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            margin: 20px 0;
            overflow-x: auto;
        }

        .file-tree ul {
            list-style: none;
        }

        .file-tree li {
            padding: 5px 0;
            padding-left: 20px;
        }

        .file-tree li:before {
            content: "üìÑ ";
            margin-right: 5px;
        }

        .file-tree .folder:before {
            content: "üìÅ ";
        }

        .checklist {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .checklist ul {
            list-style: none;
        }

        .checklist li {
            padding: 10px 0;
            padding-left: 30px;
            position: relative;
        }

        .checklist li:before {
            content: "‚òê";
            position: absolute;
            left: 0;
            color: #667eea;
            font-weight: bold;
            font-size: 1.2em;
        }

        .method-card {
            background: white;
            border: 2px solid #667eea;
            padding: 25px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .method-card h3 {
            margin-top: 0;
            color: #667eea;
        }

        .method-badge {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
            margin: 10px 5px 10px 0;
        }

        .footer {
            background: #f8f9fa;
            border-top: 2px solid #667eea;
            padding: 30px 40px;
            text-align: center;
            color: #555;
        }

        .footer p {
            margin-bottom: 10px;
        }

        .footer a {
            color: #667eea;
            text-decoration: none;
            font-weight: 600;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }

            .nav ul {
                flex-direction: column;
                gap: 10px;
            }

            .content {
                padding: 20px;
            }

            h2 {
                font-size: 1.5em;
            }

            .feature-grid {
                grid-template-columns: 1fr;
            }

            .code-block {
                font-size: 0.9em;
                padding: 15px;
            }
        }

        .highlight-box {
            background: linear-gradient(135deg, #667eea15 0%, #764ba215 100%);
            border: 2px solid #667eea;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>üöÄ Django Support Chat Library</h1>
            <p>Professional Developer Guide & Installation Instructions</p>
            <div>
                <span class="badge">v1.0</span>
                <span class="badge">Production Ready</span>
                <span class="badge">Fully Documented</span>
            </div>
        </div>

        <!-- Navigation -->
        <nav class="nav">
            <ul>
                <li><a href="#overview">Overview</a></li>
                <li><a href="#features">Features</a></li>
                <li><a href="#requirements">Requirements</a></li>
                <li><a href="#installation">Installation</a></li>
                <li><a href="#quickstart">Quick Start</a></li>
                <li><a href="#integration">Integration</a></li>
                <li><a href="#architecture">Architecture</a></li>
                <li><a href="#troubleshooting">Troubleshooting</a></li>
                <li><a href="#support">Support</a></li>
            </ul>
        </nav>

        <!-- Main Content -->
        <div class="content">
            <!-- Overview Section -->
            <section id="overview">
                <h2>üìã Overview</h2>
                <p>The <span class="highlight">Django Support Chat Library</span> is a production-ready, real-time support chat system built with Django, Channels, and WebSocket technology. It enables you to add a professional support chat widget to your Django web applications with minimal code.</p>

                <div class="highlight-box">
                    <h4>What This Library Provides:</h4>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Real-time WebSocket-based messaging</li>
                        <li>Visitor session management</li>
                        <li>Support agent dashboard</li>
                        <li>OTP-based agent authentication</li>
                        <li>Conversation management and persistence</li>
                        <li>Customer feedback collection system</li>
                        <li>Message deduplication and offline support</li>
                        <li>Responsive, mobile-friendly widget</li>
                    </ul>
                </div>

                <h3>How It Works</h3>
                <p>Visitors interact with a floating chat widget on your website. When they start a chat, they're connected to available support agents through a real-time WebSocket connection. Agents can respond immediately, and all conversations are stored in the database for future reference. At the end of the chat, visitors can rate their experience and provide feedback.</p>
            </section>

            <!-- Features Section -->
            <section id="features">
                <h2>‚ú® Key Features</h2>
                
                <div class="feature-grid">
                    <div class="feature-card">
                        <h4>üí¨ Real-time Messaging</h4>
                        <p>Instant message delivery using WebSocket technology with automatic fallback to HTTP polling.</p>
                    </div>
                    <div class="feature-card">
                        <h4>üë• Multi-Agent Support</h4>
                        <p>Multiple support agents can accept and handle conversations simultaneously.</p>
                    </div>
                    <div class="feature-card">
                        <h4>üîê OTP Authentication</h4>
                        <p>Email-based one-time password authentication for support agents.</p>
                    </div>
                    <div class="feature-card">
                        <h4>‚≠ê Feedback System</h4>
                        <p>Collect 5-star ratings and written feedback from customers.</p>
                    </div>
                    <div class="feature-card">
                        <h4>üì± Responsive Design</h4>
                        <p>Works seamlessly on desktop, tablet, and mobile devices.</p>
                    </div>
                    <div class="feature-card">
                        <h4>üíæ Persistent Storage</h4>
                        <p>All conversations and messages stored in database for history and analytics.</p>
                    </div>
                    <div class="feature-card">
                        <h4>üé® Customizable UI</h4>
                        <p>Easy to customize colors, text, and behavior to match your brand.</p>
                    </div>
                    <div class="feature-card">
                        <h4>üìä Analytics Ready</h4>
                        <p>Track chat metrics, response times, and customer satisfaction.</p>
                    </div>
                </div>
            </section>

            <!-- Requirements Section -->
            <section id="requirements">
                <h2>üì¶ Requirements</h2>

                <h3>System Requirements</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Component</th>
                            <th>Version</th>
                            <th>Notes</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Python</td>
                            <td>3.8+</td>
                            <td>Required for Django and Channels</td>
                        </tr>
                        <tr>
                            <td>Django</td>
                            <td>4.0+</td>
                            <td>Web framework</td>
                        </tr>
                        <tr>
                            <td>Django Channels</td>
                            <td>3.0+</td>
                            <td>WebSocket support</td>
                        </tr>
                        <tr>
                            <td>Daphne</td>
                            <td>3.0+</td>
                            <td>ASGI server</td>
                        </tr>
                        <tr>
                            <td>Redis</td>
                            <td>5.0+</td>
                            <td>Channel layer (for production)</td>
                        </tr>
                    </tbody>
                </table>

                <h3>Python Packages</h3>
                <div class="code-block"><code>Django==6.0.2
Channels==3.0.5
Daphne==3.0.2
channels-redis==4.1.0
python-dotenv==0.21.0</code></div>

                <h3>Browser Support</h3>
                <ul style="margin-left: 20px;">
                    <li>Chrome/Edge 90+</li>
                    <li>Firefox 88+</li>
                    <li>Safari 14+</li>
                    <li>Opera 76+</li>
                </ul>
            </section>

            <!-- Installation Section -->
            <section id="installation">
                <h2>üîß Installation</h2>

                <h3>Step 1: Install Package</h3>
                <p>Copy the <code>support_chat</code> folder into your Django project's app directory:</p>
                <div class="code-block"><code>your_project/
‚îú‚îÄ‚îÄ manage.py
‚îú‚îÄ‚îÄ your_project/
‚îÇ   ‚îú‚îÄ‚îÄ settings.py
‚îÇ   ‚îú‚îÄ‚îÄ urls.py
‚îÇ   ‚îî‚îÄ‚îÄ asgi.py
‚îî‚îÄ‚îÄ support_chat/          ‚Üê Copy here
    ‚îú‚îÄ‚îÄ models.py
    ‚îú‚îÄ‚îÄ views.py
    ‚îú‚îÄ‚îÄ consumers.py
    ‚îú‚îÄ‚îÄ urls.py
    ‚îî‚îÄ‚îÄ ...</code></div>

                <h3>Step 2: Update Django Settings</h3>
                <p>Add to <code>settings.py</code>:</p>
                <div class="code-block"><code># INSTALLED_APPS
INSTALLED_APPS = [
    'daphne',
    'channels',
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'support_chat',  # ‚Üê Add this
]

# ASGI Application
ASGI_APPLICATION = 'your_project.asgi.application'

# Channels Configuration
CHANNEL_LAYERS = {
    'default': {
        'BACKEND': 'channels_redis.core.RedisChannelLayer',
        'CONFIG': {
            'hosts': [('127.0.0.1', 6379)],
        },
    },
}

# Email Configuration (for OTP)
EMAIL_BACKEND = 'django.core.mail.backends.smtp.EmailBackend'
EMAIL_HOST = 'smtp.gmail.com'  # Use your email provider
EMAIL_PORT = 587
EMAIL_USE_TLS = True
EMAIL_HOST_USER = 'your-email@gmail.com'
EMAIL_HOST_PASSWORD = 'your-app-password'</code></div>

                <h3>Step 3: Update ASGI Configuration</h3>
                <p>Update <code>asgi.py</code>:</p>
                <div class="code-block"><code>import os
from django.core.asgi import get_asgi_application
from channels.routing import ProtocolTypeRouter, URLRouter
from channels.auth import AuthMiddlewareStack
from support_chat.routing import websocket_urlpatterns

os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'your_project.settings')

application = ProtocolTypeRouter({
    'http': get_asgi_application(),
    'websocket': AuthMiddlewareStack(
        URLRouter(
            websocket_urlpatterns
        )
    ),
})</code></div>

                <h3>Step 4: Add URLs</h3>
                <p>Update main <code>urls.py</code>:</p>
                <div class="code-block"><code">from django.contrib import admin
from django.urls import path, include

urlpatterns = [
    path('admin/', admin.site.urls),
    path('support_chat/', include('support_chat.urls')),
]</code></div>

                <h3>Step 5: Run Migrations</h3>
                <div class="code-block"><code>python manage.py migrate support_chat</code></div>

                <div class="success">
                    <strong>‚úÖ Installation Complete!</strong> Your Django project now has the support chat library installed.
                </div>
            </section>

            <!-- Quick Start Section -->
            <section id="quickstart">
                <h2>‚ö° Quick Start</h2>

                <h3>5-Minute Setup</h3>

                <div class="step-box">
                    <span class="step-number">1</span>
                    <strong>Update Your Base Template</strong>
                    <p>Add the widget to your base template:</p>
                    <div class="code-block"><code>{% load support_chat_tags %}

&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;My Website&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    {% block content %}{% endblock %}
    
    &lt;!-- Support Chat Widget --&gt;
    {% support_chat_widget %}
  &lt;/body&gt;
&lt;/html&gt;</code></div>
                </div>

                <div class="step-box">
                    <span class="step-number">2</span>
                    <strong>Collect Static Files</strong>
                    <p>Ensure CSS and JavaScript are available:</p>
                    <div class="code-block"><code>python manage.py collectstatic --noinput</code></div>
                </div>

                <div class="step-box">
                    <span class="step-number">3</span>
                    <strong>Start the ASGI Server</strong>
                    <p>Run the Daphne ASGI server:</p>
                    <div class="code-block"><code>daphne -b 127.0.0.1 -p 8000 your_project.asgi:application</code></div>
                </div>

                <div class="step-box">
                    <span class="step-number">4</span>
                    <strong>Create Support Agent</strong>
                    <p>Create a support agent in Django admin:</p>
                    <ol style="margin-left: 20px; margin-top: 10px;">
                        <li>Go to <code>http://localhost:8000/admin/</code></li>
                        <li>Navigate to Support Chat ‚Üí Support Agents</li>
                        <li>Create a new agent with email and name</li>
                    </ol>
                </div>

                <div class="step-box">
                    <span class="step-number">5</span>
                    <strong>Test the Widget</strong>
                    <p>Open your website and look for the chat button in the bottom right corner. Click it to start a test chat!</p>
                </div>

                <div class="info">
                    <strong>‚ÑπÔ∏è TIP:</strong> The widget will appear as a floating button in the bottom right corner of your page. Click it to open the chat panel.
                </div>
            </section>

            <!-- Integration Section -->
            <section id="integration">
                <h2>üîå Integration Methods</h2>

                <p>There are three ways to add the widget to your templates:</p>

                <div class="method-card">
                    <h3>Method 1: Template Tag (Recommended) ‚≠ê</h3>
                    <span class="method-badge">Simple</span>
                    <span class="method-badge">Reusable</span>
                    <span class="method-badge">Best Practice</span>
                    
                    <h4>How to Use:</h4>
                    <div class="code-block"><code>{% load support_chat_tags %}
{% support_chat_widget %}</code></div>

                    <h4>Pros:</h4>
                    <ul style="margin-left: 20px;">
                        <li>Single line to add widget</li>
                        <li>No code duplication</li>
                        <li>Easy to maintain</li>
                        <li>Works on all pages automatically</li>
                    </ul>

                    <h4>Best For:</h4>
                    <p>Most projects and production use</p>
                </div>

                <div class="method-card">
                    <h3>Method 2: Include Tag</h3>
                    <span class="method-badge">Flexible</span>
                    <span class="method-badge">Customizable</span>

                    <h4>How to Use:</h4>
                    <div class="code-block"><code>{% include 'support_chat/widget_include.html' %}</code></div>

                    <h4>Pros:</h4>
                    <ul style="margin-left: 20px;">
                        <li>More control per page</li>
                        <li>Can customize styling</li>
                        <li>More explicit</li>
                    </ul>

                    <h4>Best For:</h4>
                    <p>When you need custom styling or different behavior per page</p>
                </div>

                <div class="method-card">
                    <h3>Method 3: Manual HTML</h3>
                    <span class="method-badge">Advanced</span>
                    <span class="method-badge">Full Control</span>

                    <h4>How to Use:</h4>
                    <p>Copy the HTML directly from <code>widget_include.html</code> and customize</p>

                    <h4>Pros:</h4>
                    <ul style="margin-left: 20px;">
                        <li>Complete control</li>
                        <li>Can make any modifications</li>
                    </ul>

                    <h4>Best For:</h4>
                    <p>Very specific customization needs</p>
                </div>

                <h3>Example: Adding to Multiple Pages</h3>
                <p>Using Method 1 (Template Tag), add to your base template:</p>
                <div class="code-block"><code><!-- base.html -->
{% extends 'base.html' %}
{% load support_chat_tags %}

&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;My Website&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;nav&gt;...&lt;/nav&gt;
    
    {% block content %}{% endblock %}
    
    &lt;footer&gt;...&lt;/footer&gt;
    
    &lt;!-- Widget automatically on all pages --&gt;
    {% support_chat_widget %}
  &lt;/body&gt;
&lt;/html&gt;</code></div>

                <p>Now all child templates will automatically have the widget:</p>
                <div class="code-block"><code><!-- home.html -->
{% extends 'base.html' %}

{% block content %}
  &lt;h1&gt;Welcome Home&lt;/h1&gt;
  &lt;p&gt;Chat with us using the widget!&lt;/p&gt;
{% endblock %}
<!-- Widget inherited from base.html --&gt;</code></div>
            </section>

            <!-- Architecture Section -->
            <section id="architecture">
                <h2>üèóÔ∏è Architecture & File Structure</h2>

                <h3>Library Structure</h3>
                <div class="file-tree">
                    <ul>
                        <li class="folder">support_chat/</li>
                        <li style="margin-left: 20px;">
                            <div class="folder">templatetags/</div>
                            <ul style="margin-left: 20px;">
                                <li>__init__.py</li>
                                <li>support_chat_tags.py (Template tag registration)</li>
                            </ul>
                        </li>
                        <li style="margin-left: 20px;">
                            <div class="folder">templates/</div>
                            <ul style="margin-left: 20px;">
                                <li>widget.html</li>
                                <li>widget_include.html (Reusable component)</li>
                                <li>agent_dashboard.html</li>
                                <li>agent_login.html</li>
                            </ul>
                        </li>
                        <li style="margin-left: 20px;">
                            <div class="folder">static/support_chat/</div>
                            <ul style="margin-left: 20px;">
                                <li>
                                    <div class="folder">css/</div>
                                    <ul style="margin-left: 20px;">
                                        <li>widget.css (Widget styling)</li>
                                    </ul>
                                </li>
                                <li>
                                    <div class="folder">js/</div>
                                    <ul style="margin-left: 20px;">
                                        <li>widget.js (Widget logic)</li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li style="margin-left: 20px;">
                            <li>models.py (Database models)</li>
                            <li>views.py (HTTP endpoints)</li>
                            <li>consumers.py (WebSocket handlers)</li>
                            <li>urls.py (URL routing)</li>
                            <li>admin.py (Admin configuration)</li>
                            <li>routing.py (Channel routing)</li>
                        </li>
                    </ul>
                </div>

                <h3>Database Models</h3>
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>Model</th>
                                <th>Purpose</th>
                                <th>Key Fields</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>Visitor</code></td>
                                <td>Customer/visitor tracking</td>
                                <td>name, email, session_id</td>
                            </tr>
                            <tr>
                                <td><code>SupportAgent</code></td>
                                <td>Support team members</td>
                                <td>name, email, is_active</td>
                            </tr>
                            <tr>
                                <td><code>Conversation</code></td>
                                <td>Chat session</td>
                                <td>visitor, agent, status</td>
                            </tr>
                            <tr>
                                <td><code>Message</code></td>
                                <td>Individual messages</td>
                                <td>conversation, content, sender_type</td>
                            </tr>
                            <tr>
                                <td><code>ConversationRating</code></td>
                                <td>Customer feedback</td>
                                <td>conversation, rating, comment</td>
                            </tr>
                            <tr>
                                <td><code>AgentOTP</code></td>
                                <td>OTP verification</td>
                                <td>agent, code, is_verified</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <h3>Data Flow</h3>
                <div class="code-block"><code>1. Visitor opens website
   ‚Üì
2. Widget loads and displays floating button
   ‚Üì
3. Visitor clicks button and enters name/email
   ‚Üì
4. WebSocket connection established
   ‚Üì
5. Message sent to agent dashboard in real-time
   ‚Üì
6. Agent accepts conversation
   ‚Üì
7. Real-time messaging between visitor and agent
   ‚Üì
8. Visitor clicks "End Chat"
   ‚Üì
9. Feedback modal appears (5-star rating + comment)
   ‚Üì
10. Feedback saved to database
    ‚Üì
11. Conversation marked as closed</code></div>

                <h3>API Endpoints</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Endpoint</th>
                            <th>Method</th>
                            <th>Purpose</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>/support_chat/api/create_session/</code></td>
                            <td>POST</td>
                            <td>Create visitor session</td>
                        </tr>
                        <tr>
                            <td><code>/support_chat/api/send_message/</code></td>
                            <td>POST</td>
                            <td>Send message</td>
                        </tr>
                        <tr>
                            <td><code>/support_chat/api/submit_feedback/</code></td>
                            <td>POST</td>
                            <td>Submit feedback/rating</td>
                        </tr>
                        <tr>
                            <td><code>/ws/support/</code></td>
                            <td>WebSocket</td>
                            <td>Real-time messaging</td>
                        </tr>
                    </tbody>
                </table>
            </section>

            <!-- Customization Section -->
            <section id="customization">
                <h2>üé® Customization</h2>

                <h3>Changing Colors</h3>
                <p>Edit <code>support_chat/static/support_chat/css/widget.css</code>:</p>
                <div class="code-block"><code>/* Change primary color */
.sc-fab {
    background: linear-gradient(135deg, #your-color-1 0%, #your-color-2 100%);
}

/* Change button color */
.sc-start, .sc-send {
    background: linear-gradient(135deg, #your-color-1 0%, #your-color-2 100%);
}</code></div>

                <h3>Changing Text</h3>
                <p>Edit <code>support_chat/templates/support_chat/widget_include.html</code>:</p>
                <div class="code-block"><code>&lt;h3 class="sc-title"&gt;Your Custom Title&lt;/h3&gt;
&lt;p class="sc-subtitle"&gt;Your custom subtitle&lt;/p&gt;</code></div>

                <h3>Changing Behavior</h3>
                <p>Edit <code>support_chat/static/support_chat/js/widget.js</code> to modify initialization and event handlers.</p>

                <div class="warning">
                    <strong>‚ö†Ô∏è WARNING:</strong> Be careful when customizing to avoid breaking functionality. Always test thoroughly.
                </div>
            </section>

            <!-- Troubleshooting Section -->
            <section id="troubleshooting">
                <h2>üîß Troubleshooting</h2>

                <h3>Widget Not Appearing</h3>
                <div class="info">
                    <strong>Problem:</strong> Chat button doesn't show on page<br>
                    <strong>Solutions:</strong>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Check browser console (F12) for JavaScript errors</li>
                        <li>Verify <code>{% load support_chat_tags %}</code> is at top of template</li>
                        <li>Verify static files are collected: <code>python manage.py collectstatic</code></li>
                        <li>Clear browser cache and reload</li>
                        <li>Check <code>INSTALLED_APPS</code> includes <code>'support_chat'</code></li>
                    </ul>
                </div>

                <h3>WebSocket Not Connecting</h3>
                <div class="info">
                    <strong>Problem:</strong> Messages don't send or receive in real-time<br>
                    <strong>Solutions:</strong>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Verify Daphne ASGI server is running</li>
                        <li>Check WebSocket URL in browser console Network tab</li>
                        <li>Verify Redis is running: <code>redis-cli ping</code></li>
                        <li>Check CHANNEL_LAYERS configuration in settings</li>
                        <li>Try accessing <code>http://localhost:8000</code> (not https for local dev)</li>
                    </ul>
                </div>

                <h3>Messages Not Saving</h3>
                <div class="info">
                    <strong>Problem:</strong> Messages appear but don't persist in database<br>
                    <strong>Solutions:</strong>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Verify migrations are applied: <code>python manage.py migrate</code></li>
                        <li>Check database is configured correctly</li>
                        <li>Check Django logs for database errors</li>
                        <li>Verify support_chat models are in INSTALLED_APPS</li>
                    </ul>
                </div>

                <h3>OTP Not Sending</h3>
                <div class="info">
                    <strong>Problem:</strong> Agent doesn't receive OTP email<br>
                    <strong>Solutions:</strong>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Check email configuration in settings.py</li>
                        <li>Verify email credentials are correct</li>
                        <li>Check <code>sent_emails/</code> folder for development</li>
                        <li>Check Django logs for email errors</li>
                        <li>Try using Gmail app-specific password (not regular password)</li>
                    </ul>
                </div>

                <h3>Common Errors</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Error</th>
                            <th>Solution</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>ModuleNotFoundError: No module named 'channels'</code></td>
                            <td>Install: <code>pip install channels</code></td>
                        </tr>
                        <tr>
                            <td><code>ModuleNotFoundError: No module named 'daphne'</code></td>
                            <td>Install: <code>pip install daphne</code></td>
                        </tr>
                        <tr>
                            <td><code>TemplateDoesNotExist</code></td>
                            <td>Check APP_DIRS is True and app is in INSTALLED_APPS</td>
                        </tr>
                        <tr>
                            <td><code>CHANNEL_LAYERS configuration error</code></td>
                            <td>Verify Redis is running and config is correct</td>
                        </tr>
                    </tbody>
                </table>
            </section>

            <!-- Best Practices Section -->
            <section id="practices">
                <h2>‚úÖ Best Practices</h2>

                <div class="checklist">
                    <h3>Development</h3>
                    <ul>
                        <li>Use Daphne for local development, not Django's runserver</li>
                        <li>Enable Django debug logging to troubleshoot issues</li>
                        <li>Test on multiple browsers and devices</li>
                        <li>Keep sensitive data out of static files</li>
                        <li>Use environment variables for configuration</li>
                    </ul>
                </div>

                <div class="checklist">
                    <h3>Production Deployment</h3>
                    <ul>
                        <li>Use HTTPS for all connections</li>
                        <li>Configure Redis for channel layer</li>
                        <li>Use strong, unique email credentials</li>
                        <li>Set DEBUG = False in production</li>
                        <li>Collect static files before deploying</li>
                        <li>Use a production-grade ASGI server (Gunicorn + Daphne)</li>
                        <li>Monitor WebSocket connections and errors</li>
                        <li>Regularly backup database</li>
                    </ul>
                </div>

                <div class="checklist">
                    <h3>Security</h3>
                    <ul>
                        <li>Validate all user input on the server</li>
                        <li>Use CSRF tokens for all forms</li>
                        <li>Implement rate limiting on API endpoints</li>
                        <li>Use OTP for agent authentication</li>
                        <li>Encrypt sensitive data in database</li>
                        <li>Log all authentication attempts</li>
                        <li>Regularly update dependencies</li>
                    </ul>
                </div>

                <div class="checklist">
                    <h3>Performance</h3>
                    <ul>
                        <li>Cache static files (CSS, JS)</li>
                        <li>Use database connection pooling</li>
                        <li>Monitor WebSocket connection count</li>
                        <li>Optimize database queries</li>
                        <li>Use CDN for static files</li>
                        <li>Implement message pagination for long conversations</li>
                    </ul>
                </div>
            </section>

            <!-- Documentation Section -->
            <section id="documentation">
                <h2>üìö Additional Documentation</h2>

                <p>For more detailed information, refer to the included documentation files:</p>

                <div class="feature-grid">
                    <div class="feature-card">
                        <h4>Quick Start Guide</h4>
                        <p>Fast setup for developers who want to get started immediately.</p>
                        <p><code>docs/WIDGET_QUICKSTART.md</code></p>
                    </div>
                    <div class="feature-card">
                        <h4>Integration Guide</h4>
                        <p>Comprehensive guide on integration methods and customization.</p>
                        <p><code>docs/WIDGET_INTEGRATION.md</code></p>
                    </div>
                    <div class="feature-card">
                        <h4>Architecture</h4>
                        <p>Deep dive into system architecture and data flow.</p>
                        <p><code>docs/VISUAL_ARCHITECTURE.md</code></p>
                    </div>
                    <div class="feature-card">
                        <h4>Troubleshooting</h4>
                        <p>Solutions to common problems and verification checklist.</p>
                        <p><code>docs/VERIFICATION_AND_TROUBLESHOOTING.md</code></p>
                    </div>
                </div>

                <h3>Documentation Folder Structure</h3>
                <div class="file-tree">
                    <ul>
                        <li class="folder">docs/</li>
                        <li style="margin-left: 20px;">START_HERE.md (Read first!)</li>
                        <li style="margin-left: 20px;">WIDGET_QUICKSTART.md</li>
                        <li style="margin-left: 20px;">WIDGET_INTEGRATION.md</li>
                        <li style="margin-left: 20px;">VISUAL_ARCHITECTURE.md</li>
                        <li style="margin-left: 20px;">VERIFICATION_AND_TROUBLESHOOTING.md</li>
                        <li style="margin-left: 20px;">And more...</li>
                    </ul>
                </div>
            </section>

            <!-- Support Section -->
            <section id="support">
                <h2>ü§ù Support & Community</h2>

                <h3>Getting Help</h3>
                <div class="info">
                    <strong>Issues with Installation:</strong>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Check installation section above</li>
                        <li>Review troubleshooting guide</li>
                        <li>Check your Django version compatibility</li>
                    </ul>
                </div>

                <h3>Reporting Issues</h3>
                <p>When reporting issues, please include:</p>
                <ul style="margin-left: 20px;">
                    <li>Django version</li>
                    <li>Python version</li>
                    <li>Error message/traceback</li>
                    <li>Steps to reproduce</li>
                    <li>Browser and OS</li>
                </ul>

                <h3>Contributing</h3>
                <p>Contributions are welcome! Please follow these guidelines:</p>
                <ul style="margin-left: 20px;">
                    <li>Fork the repository</li>
                    <li>Create a feature branch</li>
                    <li>Add tests for new features</li>
                    <li>Submit a pull request</li>
                </ul>

                <h3>Version History</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Version</th>
                            <th>Release Date</th>
                            <th>Key Features</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1.0</td>
                            <td>February 2026</td>
                            <td>Initial release with core features</td>
                        </tr>
                    </tbody>
                </table>
            </section>

            <!-- Quick Reference Section -->
            <section id="reference">
                <h2>üìñ Quick Reference</h2>

                <h3>Template Tag Usage</h3>
                <div class="code-block"><code># Load the tag library
{% load support_chat_tags %}

# Add the widget anywhere in your template
{% support_chat_widget %}</code></div>

                <h3>Common Commands</h3>
                <div class="code-block"><code># Install dependencies
pip install -r requirements.txt

# Run migrations
python manage.py migrate

# Collect static files
python manage.py collectstatic --noinput

# Create superuser
python manage.py createsuperuser

# Run Daphne server
daphne -b 0.0.0.0 -p 8000 your_project.asgi:application

# Access admin panel
http://localhost:8000/admin/</code></div>

                <h3>Environment Variables</h3>
                <div class="code-block"><code># Create .env file
DEBUG=True
SECRET_KEY=your-secret-key
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_HOST_USER=your-email@gmail.com
EMAIL_HOST_PASSWORD=your-app-password
REDIS_URL=redis://127.0.0.1:6379/0</code></div>

                <h3>File Paths</h3>
                <table>
                    <thead>
                        <tr>
                            <th>File</th>
                            <th>Purpose</th>
                            <th>Location</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Widget Template</td>
                            <td>HTML markup</td>
                            <td><code>support_chat/templates/support_chat/widget_include.html</code></td>
                        </tr>
                        <tr>
                            <td>Widget CSS</td>
                            <td>Styling</td>
                            <td><code>support_chat/static/support_chat/css/widget.css</code></td>
                        </tr>
                        <tr>
                            <td>Widget JS</td>
                            <td>Logic</td>
                            <td><code>support_chat/static/support_chat/js/widget.js</code></td>
                        </tr>
                        <tr>
                            <td>Models</td>
                            <td>Database schema</td>
                            <td><code>support_chat/models.py</code></td>
                        </tr>
                        <tr>
                            <td>URLs</td>
                            <td>Routing</td>
                            <td><code>support_chat/urls.py</code></td>
                        </tr>
                    </tbody>
                </table>
            </section>

        </div>

        <!-- Footer -->
        <div class="footer">
            <p><strong>Django Support Chat Library</strong> v1.0</p>
            <p>Production-Ready Support Chat System for Django</p>
            <p style="margin-top: 20px; font-size: 0.9em; color: #999;">
                ¬© 2026 Django Support Chat. All rights reserved.
            </p>
            <p style="font-size: 0.9em; color: #999;">
                For documentation, visit the <code>docs/</code> folder
            </p>
        </div>
    </div>
</body>
</html>